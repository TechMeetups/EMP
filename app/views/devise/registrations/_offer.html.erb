<div id="offer-edit-box">
  <%= text_field_tag :offer, @user.tag_list_on(:offer_tags).join(", "), :placeholder=>"Offer" , :class=>"form-control" %>
</div>
<script>
  function onAddTag(tag) {  //tags
        alert("Added a tag: " + tag);
      }
      function onRemoveTag(tag) {
        alert("Removed a tag: " + tag);
      }

      function onChangeTag(input,tag) {
        alert("Changed a tag: " + tag);
      }

      $(function() {
      $('#offer').tagsInput({width:'auto', height:'auto'});
      });   
   $(document).mouseup(function (e)
{
    var container = $("#offer-edit-box");

    if (!container.is(e.target) // if the target of the click isn't the container...
        && container.has(e.target).length === 0) // ... nor a descendant of the container
     
    {
      var offer = $("#offer-edit-box input").val()
        $.ajax({
    url: "<%= home_offer_path(:view=>true) %>&offer="+offer,
    context: document.body
    }).done(function() {
    $( this ).addClass( "done" );
    });
    }


});
</script>